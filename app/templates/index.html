{% extends 'base.html' %}

{% block content %}
    <h1 class='center white'>Your Rooms:</h1>

    <div class='room_box white' id='room_list'></div>

    <script>
        $(document).ready(function(){
            const socket = io.connect('http://192.168.86.100:443');

            socket.emit('room_request')

            socket.on('room_update', function(rooms){

                for (let i = 0; i < rooms.length; i++){
                    room = rooms[i]

                    span = document.createElement('span')
                    span.setAttribute('class', 'room_box')

                    room_name = document.createElement('h1')
                    room_name.setAttribute('class', 'room_box')
                    room_name.appendChild(document.createTextNode(room['name']))
                    span.appendChild(room_name)

                    span.appendChild(document.createElement('br'))


                    data_row1 = document.createElement('span')
                    data_row1.setAttribute('class', 'room_box_data')

                    if (room['users'].length > 3){
                        for (let j = 0; j < 3; j++){
                            user = room['users'][j]
                            username = document.createElement('b')
                            username.setAttribute('style', 'color:' + user.color + '; letter-spacing: 1px')
                            username.appendChild(document.createTextNode(user['nickname']))

                            data_row1.appendChild(username)
                        }
                    }

                    span.appendChild(data_row1);

                    document.getElementById('room_list').appendChild(span)

                }

            });



        });
    </script>
{% endblock %}